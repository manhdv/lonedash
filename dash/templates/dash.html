{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h2 class="mb-0">Dashboard</h2>
  </div>
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h4 class="mb-0">Performance</h4>
  </div>

<div class="d-flex border-bottom pb-3" style="gap: 1rem;">
  <div style="flex: 1 1 15%;">
    <div class="card w-100">
      <div class="card-body">
        <h5 class="card-title">Equity</h5>
        <p class="card-text {% if portfolio.equity > 0 %}text-success{% elif portfolio.equity < 0 %}text-danger{% else %}text-muted{% endif %}">
          ${{ portfolio.equity|floatformat:2 }}
        </p>
      </div>
    </div>
  </div>

  <div style="flex: 1 1 15%;">
    <div class="card w-100">
      <div class="card-body">
        <h5 class="card-title">Profit</h5>
        <p class="card-text {% if portfolio.profit > 0 %}text-success{% elif portfolio.profit < 0 %}text-danger{% else %}text-muted{% endif %}">
          ${{ portfolio.profit|floatformat:2 }}
        </p>
      </div>
    </div>
  </div>

  <div style="flex: 1 1 15%;">
    <div class="card w-100">
      <div class="card-body">
        <h5 class="card-title">Return</h5>
        <p class="card-text {% if portfolio.profit_percent > 0 %}text-success{% elif portfolio.profit_percent < 0 %}text-danger{% else %}text-muted{% endif %}">
          {{ portfolio.profit_percent|floatformat:2 }}%
        </p>
      </div>
    </div>
  </div>

  <div style="flex: 1 1 15%;">
    <div class="card w-100">
      <div class="card-body">
        <h5 class="card-title">TWRR</h5>
        <p class="card-text text-success">
          {{ twrr|floatformat:2 }}%
        </p>
      </div>
    </div>
  </div>

  <div style="flex: 1 1 15%;">
    <div class="card w-100">
      <div class="card-body">
        <h5 class="card-title">Max DD</h5>
        <p class="card-text text-danger">
          {{ max_dd|floatformat:2 }}%
        </p>
      </div>
    </div>
  </div>

  <div style="flex: 1 1 15%;">
    <div class="card w-100">
      <div class="card-body">
        <h5 class="card-title">Cash</h5>
        <p class="card-text text-info">
          ${{ portfolio.balance|floatformat:2 }}
        </p>
      </div>
    </div>
  </div>
</div>


  <div class="d-flex justify-content-between align-items-center mb-2 pt-3">
    <h4 class="mb-0">Equity chart</h4>
  </div>
  <canvas class="my-4 w-100" id="myChart"></canvas>

</main>

<div id="modal-container"></div>
{% endblock %}

{% block page_scripts %}
{% load static %}
<script src="{% static 'js/dashboard.js' %}"></script>
{% endblock %}

